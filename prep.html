<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Erev Shabbat Prep · Washington</title>

  <meta name="theme-color" content="#0b0b0b">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <style>
    :root { color-scheme: dark; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: #0b0b0b;
      color: #f2f2f2;
      line-height: 1.35;
    }
    header {
      padding: 18px 16px 10px;
      border-bottom: 1px solid #242424;
      background: #0f0f0f;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    h1 { margin: 0 0 6px; font-size: 18px; }
    .sub { margin: 0; opacity: 0.85; font-size: 13px; }
    main { padding: 16px; max-width: 720px; margin: 0 auto; }
    .card {
      border: 1px solid #242424;
      border-radius: 12px;
      padding: 14px;
      background: #101010;
      margin: 14px 0;
    }
    .warn {
      border-left: 4px solid #ffd54a;
      background: #14120a;
    }
    .muted { opacity: 0.8; font-size: 13px; }
    .small { opacity: 0.7; font-size: 12px; }
    ul { margin: 10px 0 0; padding-left: 18px; }
    li { margin: 8px 0; }
    .row { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 10px; }
    button, a.btn {
      width: 100%;
      background: #171717;
      color: #f2f2f2;
      border: 1px solid #2b2b2b;
      border-radius: 10px;
      padding: 12px 12px;
      font-size: 15px;
      cursor: pointer;
    }
    a.btn { text-decoration: none; display: inline-block; text-align: center; }
    textarea {
      width: 100%;
      min-height: 110px;
      resize: vertical;
      background: #0c0c0c;
      color: #f2f2f2;
      border: 1px solid #2b2b2b;
      border-radius: 10px;
      padding: 10px;
      font-size: 14px;
      line-height: 1.3;
    }

    /* Print style */
    @media print {
      header, .no-print { display: none !important; }
      body { background: #fff; color: #000; }
      .card { border: 1px solid #999; background: #fff; }
      .muted, .small { opacity: 1; color: #111; }
      textarea { border: 1px solid #999; color: #000; background: #fff; }
    }
  </style>
</head>

<body>
  <header>
    <h1>Erev Shabbat Prep</h1>
    <p class="sub">Offline checklist + notes (intended for before Shabbat/Yom Tov).</p>
  </header>

  <main>
    <section class="card warn">
      <strong>Halakhic note:</strong>
      <div class="muted" style="margin-top:6px;">
        This page is for <b>preparation</b> before Shabbat/Yom Tov and for <b>after</b>.
        Please do not use on Shabbat or Yom Tov.
      </div>
    </section>

    <section class="card">
      <strong>Quick checklist</strong>
      <ul class="muted">
        <li><b>Tzedakah</b> before candle lighting</li>
        <li><b>Mikvah / shower</b> / prepare clothing</li>
        <li><b>Challah</b>, <b>wine/grape juice</b>, candles ready</li>
        <li><b>Blech/hot plate</b> set; timers set</li>
        <li><b>Lights</b> set; fridge light handled as needed</li>
        <li><b>Devices away</b> (phones placed out of sight)</li>
        <li><b>Siddur/Chumash</b> ready; shul items ready</li>
        <li><b>Guests</b>: seating, food, directions, walk route</li>
        <li><b>Eruv</b>: check local status if relevant</li>
      </ul>

      <div class="row no-print">
        <button type="button" id="printBtn">Print this sheet</button>
        <a class="btn" href="./index.html">Back to times</a>
      </div>
      <p class="small" style="margin-top:10px;">
        Tip: print this before Shabbat so you don’t need your phone.
      </p>
    </section>

    <section class="card">
      <strong>Family / guest notes (saved on this device)</strong>
      <p class="muted" style="margin:8px 0 10px;">
        Example: “Guests: ___, bring extra grape juice, set hot plate to ___.”
      </p>
      <textarea id="notes" placeholder="Type notes here..."></textarea>
      <div class="row no-print">
        <button type="button" id="saveBtn">Save notes</button>
        <button type="button" id="clearBtn">Clear notes</button>
      </div>
      <p class="small" style="margin-top:10px;">
        Notes are stored locally (no accounts, no tracking).
      </p>
    </section>
  </main>

  <script>
    const NOTES_KEY = "erev_shabbat_notes_v1";
    const notes = document.getElementById("notes");
    const saveBtn = document.getElementById("saveBtn");
    const clearBtn = document.getElementById("clearBtn");
    const printBtn = document.getElementById("printBtn");

    // Load
    notes.value = localStorage.getItem(NOTES_KEY) || "";

    saveBtn.addEventListener("click", () => {
      localStorage.setItem(NOTES_KEY, notes.value || "");
      saveBtn.textContent = "Saved ✓";
      setTimeout(() => (saveBtn.textContent = "Save notes"), 900);
    });

    clearBtn.addEventListener("click", () => {
      localStorage.removeItem(NOTES_KEY);
      notes.value = "";
    });

    printBtn.addEventListener("click", () => window.print());

    // Register service worker (safe to include here too)
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }
  </script>
</body>
</html>
